---
import "../../styles/research.css";

import { getPosts } from "../../scripts/posts";
import PostsByYear from "../../layouts/PostsByYear.astro";

export async function getStaticPaths() {
  const posts = await getPosts();
  const filteredPosts = posts.filter(
    (post) => post.data.research !== undefined
  );

  const years = [
    ...new Set(
      filteredPosts.map((post) => post.data.published!.getFullYear()).flat()
    ),
  ];

  return years.map((year) => ({
    params: { year },
    props: { },
  }));
}

const { year } = Astro.params;

function testfunc() { return "abc"; }
---

<PostsByYear category="research" year={year} page={testfunc}></PostsByYear>